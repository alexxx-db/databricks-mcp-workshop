# Databricks Asset Bundle Configuration - Prototyping with Confidence on Databricks
bundle:
  name: mcp-workshop
  
variables:
  # Workshop configuration variables
  workshop_name:
    description: "Name of the MCP workshop"
    default: "Prototyping with Confidence on Databricks"

  participant_prefix:
    description: "Participant prefix for resource naming"
    default: "default"

  workshop_catalog:
    description: "Workshop catalog name"
    default: "mcp_workshop"

  create_catalog:
    description: "Whether to create catalog or use existing (true/false)"
    default: "true"

targets:
  # Development target for testing
  dev:
    mode: development
    default: true
    
  # Production target for workshop deployment
  prod:
    mode: production

resources:
  # Jobs for workshop setup and teardown
  jobs:
    setup_workshop_resources:
      name: "Setup MCP Workshop Resources"
      description: "Sets up Unity Catalog resources needed for the workshop"

      tasks:
        - task_key: "create_catalog"
          notebook_task:
            notebook_path: "./setup/create_workshop_catalog.py"
            base_parameters:
              catalog_name: "${var.workshop_catalog}"
              create_catalog: "${var.create_catalog}"

        - task_key: "setup_sample_data"
          depends_on:
            - task_key: "create_catalog"
          notebook_task:
            notebook_path: "./setup/setup_sample_data.py"
            base_parameters:
              catalog_name: "${var.workshop_catalog}"

    cleanup_workshop_resources:
      name: "Cleanup MCP Workshop Resources"
      description: "Cleans up Unity Catalog resources created for the workshop"
      
      tasks:
        - task_key: "cleanup_resources"
          notebook_task:
            notebook_path: "./setup/cleanup_workshop_resources.py"
            base_parameters:
              catalog_name: "${var.workshop_catalog}"
